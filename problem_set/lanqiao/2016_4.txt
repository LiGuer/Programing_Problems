for(int t=p+1;t<=j;t++)swap(a,t-1,t);
对，但不最好。改：不需要这么麻烦，swap(a,p,j)，就行了，左右并没有排序，只是以基准分开了。